<meta charset="UTF-8">
<script>
    /* 
    1. Função para validar valor de venda: Valide se o valor é positivo (use while).
    2. Função para registrar vendas: Use for para registrar vendas de 5 dias para cada vendedor. Armazene em um array.
    3. Função para calcular total de vendas: Some todas as vendas de cada vendedor usando for.
    4. Função para calcular comissão: Use if...else aninhado:
    - Vendas < R$ 5000: 5% de comissão
    - Vendas R$ 5000 a R$ 10000: 10% de comissão
    - Vendas R$ 10000 a R$ 15000: 15% de comissão
    - Vendas > R$ 15000: 20% de comissão
    */
    let vendedores = [`Carlos`, `Ana`, `Pedro`];
    let vendas = [[], [], []];

    function validar(sla) {
        while (sla <= 0 || isNaN(sla)) {
    sla = Number(prompt(`Inválido! O valor deve ser positivo:`));

    }
    return sla;

}
    function registrar(nome, i){
        let vendaDoVendedor = vendas[i];
        for(let dias = 1; dias <= 5; dias++){
        let vendido = Number(prompt(`Informe a venda do dia ${dias} do vendedor ${nome}`));
        vendido = validar(vendido);
        vendaDoVendedor.push(vendido)
    }
}   
    function calcular(todas){
        let soma = 0;
        for(let x = 0; x < todas.length; x++){
            soma+= todas[x];
        }
        return soma;
    }
    function comissao(hailToTheKing){
        let comissao = 0;
        if(hailToTheKing <  5000){
            comissao = hailToTheKing * 0.05;
        } else if(hailToTheKing <= 10000){
        comissao = hailToTheKing * 0.1;
        }else if(hailToTheKing <= 15000){
            comissao = hailToTheKing * 0.15;
        }else if(hailToTheKing > 15000){
            comissao = hailToTheKing * 0.20
        }
        return comissao;
    }
    //exibição

    let opcao = 1;

    while (opcao > 0) {
    opcao = parseInt(prompt(
        ` GERENCIAMENTO DE VENDAS \n\n` +
        `1. Registrar vendas\n` +
        `2. Mostrar ranking\n` +
        `0. Sair\n\n` +
        `Escolha uma opção:`));

    switch(opcao) {
        case 1:
         let escolha = parseInt(prompt(
            `Escolha o vendedor:\n` +
            `0-Carlos\n` +
            `1-Ana\n` +
            `2-Pedro`));

           if (escolha >= 0 && escolha < 3) {
            registrar(vendedores[escolha], escolha);
            alert(`Vendas do ${vendedores[escolha]} registradas`);
      } else {
                alert(`INVÁLIDO`);
            }
            break;

        case 2:
              let resultados = [];
            for (let i = 0; i < vendedores.length; i++) {
                let total = calcular(vendas[i]);
                let comi = comissao(total);
                resultados.push({ nome: vendedores[i], total, comissao: comi });
            }

            resultados.sort((a, b) => b.total - a.total);

            let mensagem = `Ranking de Vendedores:\n`;
            for (let i = 0; i < resultados.length; i++) {
                mensagem = mensagem + `${i + 1}º lugar: ${resultados[i].nome}  Total: R$${resultados[i].total.toFixed(2)} (Comissão: R$ ${resultados[i].comissao.toFixed(2)})\n`;
            }
            alert(mensagem);
            break;

        case 0:
            alert(`Saindo do sistema`);
            break;

        default:
            alert(`INVÁLIDO`);
    }
}
</script>